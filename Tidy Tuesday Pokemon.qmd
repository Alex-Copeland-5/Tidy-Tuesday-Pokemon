---
title: "Tidy Tuesday Pokemon"
author: "Alex Copeland"
format: 
    html:
        embed-resources: true
editor: visual
---

## Load Data Set
```{R}
pokemon_df_old<- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-04-01/pokemon_df.csv', show_col_types = FALSE)
```

## Dataset

This week we are exploring Pokemon! This dataset is sourced from {pokemon} (CRAN \| github), an R package which provides Pokemon information in both English and Brazilian Portuguese.

## Simulation

```{r}

# Making new df
pokemon_df <- data.frame(
  pokemon <- pokemon_df_old[,"pokemon"],
  hp <- pokemon_df_old[,"hp"],
  attack <- pokemon_df_old[,"attack"],
  defense <- pokemon_df_old[,"defense"],
  special_attack <- pokemon_df_old[,"special_attack"],
  special_defense <- pokemon_df_old[,"special_defense"],
  speed <- pokemon_df_old[,"speed"]
  )
```



```{R}
#Define Score to be all of the pokemons' stats summed.

pokemon_df$score <- pokemon_df_old$hp + pokemon_df_old$attack + pokemon_df_old$defense + pokemon_df_old$special_attack +pokemon_df_old$special_defense + pokemon_df_old$speed
```



```{r}
fight_sim <- function(pokemon1, pokemon2, sigma) {

  wins_pokemon1 <- 0
  wins_pokemon2 <- 0
  ties <- 0

    for (k in 1:10) {
      
      # Defining a random number +- of sigma to be luck factor.
      epsilon_a <- rnorm(1, 0, sigma)
      epsilon_b <- rnorm(1, 0, sigma)
  
      # Updating new score
      score_pokemon1 <- pokemon1$score + epsilon_a
      score_pokemon2 <- pokemon2$score + epsilon_b
      
        #Logic
        if (score_pokemon1 > score_pokemon2) {
          wins_pokemon1 <- wins_pokemon1 + 1
        }
        else if (score_pokemon2 > score_pokemon1) {
           wins_pokemon2 <- wins_pokemon2 + 1
        }
        else {
            ties <- ties + 1
        }
    }
  
  #sprintf("blah %s blah blah %d, %s = string, %d = int)
  print(sprintf("%s won %d times", pokemon1$pokemon[1], wins_pokemon1))
  print(sprintf("%s won %d times", pokemon2$pokemon[1], wins_pokemon2))
  print(sprintf("tied %d times", ties))
}

# This confused me,
# pokemon_df[pokemon_df$pokemon == "venusaur",]
# says to go in df, get the all the rows where the pokemon is venasur.
fight_sim(pokemon_df[pokemon_df$pokemon == "venusaur",], pokemon_df[pokemon_df$pokemon == "charizard",], sigma = 50)
```



```{R}
#Define noise for simulation

# We define sigma, to control amount of luck in simulation.
sigma <- 200

  for (i in 1:5){
  if (i == 5){
    break
    }
  for (j in (i + 1):5){
      fight_sim(pokemon[i,], pokemon[j,], sigma)
      }
  }

# I think this is breaking because I am trying to pass in a column, instead of a pokemon.

```